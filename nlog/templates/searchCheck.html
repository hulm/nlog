{% extends "base.html" %}

{% block content %}
           <div class="input-group">
                   <select id="hosts">
                       <option>172.16.8.22</option>
                       <option>172.16.8.26</option>
                       <option>所有主机</option>
                   </select>
                     <select id="ports">
                       <option>23001</option>
                       <option>23038</option>
                       <option>所有端口</option>
                   </select>
               <button id="search" value="搜索">测试</button>
               </div>
			<div>
				<table id="searchCheckList" class="table table-bordered table-hover table-condensed">
					<thead>
                        <tr>
                            <th>搜索数据库状态</th>
                        </tr>
                    </thead>
                    <tbody >
                        <tr  id="searchres">
                            
                        </tr>
                    </tbody>
					
				</table>
            </div>
        <script type="text/javascript">
            $(function(){
                $('#management').addClass("in");
                $('#search_check_list').addClass("active btn btn-default");
                $("#search").click(function () {
                    $.ajax({
                        url: "/searchDBCheck1/",
                        dataType: 'json',
                        success: function (data) {
                            //alert(data);
                            //console.log($("#searchres").html())
                            $("#searchres").empty();
                            for (i in data) {
                                $("#searchres").html(function () {
                                    if (data[i]['num']==null){
                                        return $("#searchres").html() + "<tr><td>" + "<strong style=\"color:red\">" + "<td>" + "host:" + data[i]['host'] + "</td>" + "<td>" + "port:" + data[i]['port'] + "</td>" + "<td>" + "dbname:" + data[i]['dbname'] + "</td>" + "<td>" + "num:" + data[i]['num'] + "</td>" + "</strong>" + "</td></tr>";
                                    }
                                    else{
                                        return $("#searchres").html() + "<tr><td>" +"<td>" + "host:" + data[i]['host'] + "</td>" + "<td>" + "port:" + data[i]['port'] + "</td>" + "<td>" + "dbname:" + data[i]['dbname'] + "</td>" + "<td>" + "num:" + data[i]['num'] + "</td>" + "</td></tr>";
                                    }
                                    
                                });
                                console.log(data[i]['host'] + data[i]['port'] + data[i]['num']);
                             }
                        }
                    })
                })
                
            })
    	</script>
{% endblock %}
